<div class="wrapper">

    <app-navbar></app-navbar>

    <app-sidebar></app-sidebar>

    <div class="content-wrapper">

        <section class="content">

            <div class="container-fluid">

                <app-title 
                    [title]="title"
                    [breadcrumbtitle]="breadcrumbtitle"
                    [breadcrumbtitle2]="breadcrumbtitle2"
                >
                </app-title>

                <app-loading *ngIf="loading"></app-loading>

                <div *ngIf="!loading">

                    <div class="card">
                    <!-- /.card-header -->
                    <div class="card-body">
                        <form (ngSubmit)="onSubmit(f)" #f="ngForm" class="form-group">
                            <div class="form-group">
                                <label for="nombre">Nombre:</label>
                                <input 
                                    type="text"
                                    name="nombre"
                                    class="form-control"
                                    [(ngModel)]="usuario.nombre"
                                    [ngClass]="{'is-invalid':f.submitted && f.controls['nombre'].errors}"
                                    maxlength="450"
                                    required
                                >
                            </div>
                            <div class="form-group">
                                <label for="email">Correo Electrónico:</label>
                                <input 
                                    type="email"
                                    name="email"
                                    class="form-control"
                                    [(ngModel)]="usuario.email"
                                    [ngClass]="{'is-invalid':f.submitted && f.controls['email'].errors}"                                       
                                    required
                                >
                            </div>
                            <div class="form-group">
                                <label for="role">Perfil:</label>
                                <select 
                                    name="role"
                                    class="form-control"
                                    [(ngModel)]="usuario.role"
                                    [ngClass]="{'is-invalid':f.submitted && f.controls['role'].errors}"
                                    required
                                >
                                    <option 
                                        value="ADMIN"
                                        [selected]="usuario.role == 'ADMIN'"
                                    >
                                        ADMINISTRADOR
                                    </option>
                                    <option 
                                        value="SUPERVISOR SSTA"
                                        [selected]="usuario.role == 'SUPERVISOR SSTA'"
                                    >
                                        SUPERVISOR SSTA
                                    </option>
                                    <option 
                                        value="SUPERVISOR LEGAL LABORAL"
                                        [selected]="usuario.role == 'SUPERVISOR LEGAL LABORAL'"
                                    >
                                        SUPERVISOR LEGAL LABORAL
                                    </option>
                                    <option 
                                        value="SUPERVISOR DEL CONTRATO"
                                        [selected]="usuario.role == 'SUPERVISOR DEL CONTRATO'"
                                    >
                                        SUPERVISOR DEL CONTRATO
                                    </option>                                 
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="empresa">Empresa:</label>
                                <select 
                                    name='empresa'                         
                                    class="form-control" 
                                    [(ngModel)]="usuario.empresa" 
                                    [ngClass]="{'is-invalid':f.submitted && f.controls['empresa'].errors}"    
                                    required
                                >                            
                                    <option [value]='t._id' *ngFor='let t of listadoEmpresa'>{{ t.nombre }}</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="estado">Activo: </label>
                                <select 
                                    name="estado"
                                    class="form-control"
                                    [(ngModel)]="usuario.estado"
                                    [ngClass]="{'is-invalid':f.submitted && f.controls['estado'].errors}"
                                    required
                                >
                                    <option [value]=1>Si</option>
                                    <option [value]=0>No</option>
                                </select>
                            </div>
                            <!--<div class="form-group">
                                <label for="sendemail">Recibe Email: </label>
                                <select 
                                    name="sendemail"
                                    class="form-control"
                                    [(ngModel)]="usuario.sendemail"
                                    [ngClass]="{'is-invalid':f.submitted && f.controls['sendemail'].errors}"
                                    required
                                >
                                    <option [value]=1>Si</option>
                                    <option [value]=0>No</option>
                                </select>
                            </div>-->
                            <div class="form-group">
                                <label for="enterweb">Login en Web: </label>
                                <select 
                                    name="enterweb"
                                    class="form-control"
                                    [(ngModel)]="usuario.enterweb"
                                    [ngClass]="{'is-invalid':f.submitted && f.controls['enterweb'].errors}"
                                    required
                                >
                                    <option [value]=1>Si</option>
                                    <option [value]=0>No</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="entermovil">Login en Móvil: </label>
                                <select 
                                    name="entermovil"
                                    class="form-control"
                                    [(ngModel)]="usuario.entermovil"
                                    [ngClass]="{'is-invalid':f.submitted && f.controls['entermovil'].errors}"
                                    required
                                >
                                    <option [value]=1>Si</option>
                                    <option [value]=0>No</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="editorder">Edita Ordenes: </label>
                                <select 
                                    name="editorder"
                                    class="form-control"
                                    [(ngModel)]="usuario.editorder"
                                    [ngClass]="{'is-invalid':f.submitted && f.controls['editorder'].errors}"
                                    required
                                >
                                    <option [value]=1>Si</option>
                                    <option [value]=0>No</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="imgsign">Firma Digital:</label>
                                <input 
                                    type="file" #Image accept="image/*" 
                                    name="imgsign"
                                    class="form-control-file"
                                    (change)="signUpload($event)"
                                >
                            </div> 
                            <div class="form-group">
                                <button class="btn btn-primary" type="submit">
                                    <i [ngClass]="{'fa-refresh fa-spin':loadingButton}" class="fa"></i>
                                    Guardar
                                </button>
                            </div>

                        </form>
                    </div>
                    </div>

                </div>

            </div>

        </section>

    </div>

    <aside class="control-sidebar control-sidebar-dark">
    </aside>

</div>
