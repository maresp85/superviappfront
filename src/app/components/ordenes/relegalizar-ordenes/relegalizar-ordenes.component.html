<div class="wrapper">

    <app-navbar></app-navbar>
  
    <app-sidebar></app-sidebar>
  
    <div class="content-wrapper">
  
      <section class="content">
  
        <div class="container-fluid">
                  
          <app-title [title]="title" 
                     [breadcrumbtitle]="breadcrumbtitle" 
                     [breadcrumbtitle2]="breadcrumbtitle2">
          </app-title>
          
          <app-loading *ngIf="loading"></app-loading>    
              
          <div *ngIf="!loading">

            <div class="card">
              <div class="card-header ui-sortable-handle" style="cursor: move;">
                <h3 class="card-title">
                  <i class="ion ion-clipboard mr-1"></i>
                  {{ subtitle }}
                </h3>

              </div>
              <!-- /.card-header -->
              <div class="card-body">
                <ul class="todo-list ui-sortable" data-widget="todo-list">
                  <li *ngFor="let lista of listado; let i = index"> 
                    <input 
                      type="checkbox" 
                      [id]="i" 
                      (change)="listaChequeo(i, $event)" 
                    />
                    <span class="text">{{ lista.etiqueta }}</span>
                    <span class="float-right text" *ngIf="lista.tipo.toUpperCase() == 'FIRMA DIGITAL'">
                      <img src="{{ imgfirma }}" width="40%"/>
                    </span> 
                    <div *ngIf="lista.imagen == 1" 
                         class="float-right"
                         [ngClass]="{'alert-danger':existsFile}">
                      <input 
                        type="file" #Image accept="image/*" 
                        class="form-control-file float-right" 
                        (change)="fileUpload($event, lista.tipo)"
                        multiple
                        required>  
                    </div>
                    <div class="form-group mt-3" *ngIf="i == listado.length-1">
                      <div class="mt-2">
                        <label for="observaciones">Observaciones:</label>
                        <textarea type="text" 
                                  name="observaciones"
                                  class="form-control"
                                  [(ngModel)]="observaciones"
                                  maxlength="650">
                        </textarea>
                      </div>
                      <div *ngIf="fechaMejora && this.cumple == 0" class="mt-2">                        
                        <label for="fechaMejora">Fecha proyectada de Mejora:</label>
                        <input type="date"
                               name="fechaMejora"
                               class="form-control"
                               [(ngModel)]="fechaMejora">                        
                      </div>
                    </div>                                         
                  </li>                 
                </ul>
              </div>
              <!-- /.card-body -->
              <div class="card-footer clearfix">
                <button type="button" 
                        class="btn btn-info float-right" 
                        [disabled]="disabledbutton"
                        (click)="legalizarOrdenActividad()">
                  <i [ngClass]="{'fa-refresh fa-spin':loadingButton}" class="fa"></i>
                  RELEGALIZAR
                </button>
              </div>
            </div>

 
          </div>
  
        </div>
  
      </section>  
    
    </div>
  
    <aside class="control-sidebar control-sidebar-dark">
    </aside>
  
  </div>